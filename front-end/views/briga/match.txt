<!DOCTYPE html>
<html lang="pt-br"> <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CineMatch - Seu Match!</title> <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />

    <script src="https://kit.fontawesome.com/5394ea2044.js" crossorigin="anonymous"></script>

    <style>
        html {
            height: 100%;
        }
        body {
            min-height: 100%;
            margin: 0;
            font-family: 'Roboto', sans-serif;
            display: flex;
            flex-direction: column;
            /* Gradiente animado como fundo */
            background: linear-gradient(135deg, #d4aFF7, #f3c2e0, #a8b5f0, #f7b7d7);
            background-size: 600% 600%;
            animation: gradientAnimation 25s ease infinite;
            color: #333; /* Cor de texto padrão para contraste com fundos claros de cards */
        }

        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* TELA DE LOADING */
        #loading {
            background-color: rgba(40, 28, 68, 0.85);
            backdrop-filter: blur(5px);
            z-index: 1056;
            color: #f3c2e0;
        }
        #loading .spinner-border {
            width: 4rem;
            height: 4rem;
            border-width: .35rem;
        }

        /* TELA DE ERRO */
        #erro {
            background-color: rgba(0,0,0,0.7);
            z-index: 1055;
            color: #fff;
        }
        #erro .alert-danger-custom {
            background-color: rgba(220, 53, 69, 0.85);
            border-color: rgba(220, 53, 69, 0.9);
            color: #fff;
            backdrop-filter: blur(5px);
            padding: 2rem;
            border-radius: 0.5rem;
        }

        /* CONTEÚDO PRINCIPAL */
        #conteudo {
            /* display: none; é controlado por JS */
            flex-grow: 1; /* Faz o conteúdo principal ocupar o espaço disponível */
        }

        .navbar-custom {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
        }
        .navbar-custom .navbar-brand img {
            max-height: 40px;
        }
        .navbar-custom .navbar-brand span {
            color: #fff; /* Cor do texto do logo */
            font-weight: bold;
            margin-left: 0.5rem;
        }

        .match-details-page { /* Container para toda a página de match */
            padding-top: 2rem;
            padding-bottom: 2rem;
        }

        .movie-card-details {
            background-color: rgba(255, 255, 255, 0.92);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            margin-bottom: 2rem;
        }

        .photo-img {
            width: 100%;
            max-width: 300px; /* Limita largura do poster em telas maiores */
            height: auto;
            border-radius: 10px;
            object-fit: cover;
            margin: 0 auto 1rem auto; /* Centraliza e adiciona margem inferior */
            display: block;
        }

        .movie-info h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #3c325c; /* Roxo escuro para o título */
            margin-bottom: 0.25rem;
        }
        .movie-info .text-muted { /* Para o ano */
            font-size: 1.2rem;
        }

        .photo-bio {
            font-size: 0.95rem;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
            color: #454545;
        }
        .photo-bio a {
            color: #8A2BE2; /* Roxo para o link TMDB */
            text-decoration: none;
            font-weight: 500;
        }
        .photo-bio a:hover {
            text-decoration: underline;
        }

        .details-section .badge {
            font-size: 0.85rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            padding: 0.4em 0.7em;
        }

        .div_providers {
            background-color: rgba(255, 255, 255, 0.85);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .div_providers .provedores { /* Título "Provedores" */
            font-size: 1.5rem;
            font-weight: 600;
            color: #3c325c;
            margin-bottom: 1rem;
            text-align: center;
        }
        .providers-container {
            display: flex;
            flex-wrap: wrap; /* Permite que os itens quebrem para a próxima linha */
            gap: 1rem; /* Espaço entre os logos dos provedores */
            justify-content: center; /* Centraliza os logos se não preencherem a linha */
        }
        .provider-item img {
            height: 40px; /* Altura padrão para os logos */
            width: auto;   /* Largura automática para manter a proporção */
            max-width: 120px; /* Largura máxima para logos muito largos */
            border-radius: 5px; /* Borda suave se os logos tiverem fundo */
            transition: transform 0.2s ease-in-out;
        }
        .provider-item img:hover {
            transform: scale(1.1);
        }

    </style>
</head>

<body class="d-flex flex-column">

    <div id="loading" class="d-flex justify-content-center align-items-center vh-100 vw-100 position-fixed top-0 start-0">
        <div class="spinner-border" role="status">
            <span class="visually-hidden">Carregando...</span>
        </div>
    </div>

    <div id="erro" class="d-flex justify-content-center align-items-center vh-100 vw-100 position-fixed top-0 start-0" style="display: none;">
        <div class="alert-danger-custom shadow-lg text-center p-4">
            <h4 class="alert-heading mb-3"><i class="fas fa-exclamation-triangle me-2"></i>Oops! Algo deu errado.</h4>
            <p>Não foi possível carregar as informações do filme no momento.</p>
            <hr class="my-3" style="border-top: 1px solid rgba(255,255,255,0.5);">
            <p class="mb-0">Por favor, tente recarregar a página ou volte mais tarde.</p>
        </div>
    </div>

    <div id="conteudo" class="flex-grow-1" style="display: none;">
        <nav class="navbar navbar-custom sticky-top">
            <div class="container">
                <a class="navbar-brand" href="#">
                    <img src="../assets/img/heart_home.svg" alt="CineMatch Logo" />
                    <span>CineMatch</span>
                </a>
                </div>
        </nav>

        <div class="container match-details-page">
            <div class="row justify-content-center">
                <div class="col-lg-10 col-xl-8"> {/* Coluna para conter o card principal e os provedores */}
                    
                    <div class="movie-card-details">
                        <div class="row">
                            <div class="col-md-4 text-center text-md-start mb-3 mb-md-0">
                                <img src="" alt="Poster do Filme" class="photo-img shadow-sm" id="moviePoster" /> {/* Populado por JS */}
                            </div>
                            <div class="col-md-8 movie-info">
                                <h2 id="movieTitle"></h2> {/* Populado por JS */}
                                <p class="text-muted" id="movieYear"></p> {/* Populado por JS */}
                                
                                <div class="details-section mb-3">
                                    <strong>Gêneros:</strong> <span id="movieGenres"></span><br> {/* Populado por JS, ex: com badges */}
                                    <strong>Nota:</strong> <span id="movieRating" class="fw-bold"></span> {/* Populado por JS */}
                                </div>

                                <div class="photo-bio">
                                    <p id="movieOverview"></p> {/* Populado por JS */}
                                </div>
                                <a href="#" id="tmdbLink" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-outline-primary">
                                    <i class="fa-solid fa-circle-info me-1"></i> Ver no TMDB
                                </a> {/* Populado por JS */}
                            </div>
                        </div>
                    </div>

                    <div class="div_providers mt-4">
                        <h3 class="provedores">Onde Assistir:</h3>
                        <div class="providers-container" id="providersContainer">
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="../assets/js/match.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Esta função é apenas um EXEMPLO ILUSTRATIVO.
            // Sua lógica real virá do match.js e dos dados recebidos.
            function popularMatchExemplo() {
                // Elementos para popular
                const moviePoster = document.getElementById('moviePoster');
                const movieTitle = document.getElementById('movieTitle');
                const movieYear = document.getElementById('movieYear');
                const movieGenres = document.getElementById('movieGenres');
                const movieRating = document.getElementById('movieRating');
                const movieOverview = document.getElementById('movieOverview');
                const tmdbLink = document.getElementById('tmdbLink');
                const providersContainer = document.getElementById('providersContainer');

                // Dados de exemplo (você receberá isso do seu backend/API)
                const filmeExemplo = {
                    posterUrl: 'https://image.tmdb.org/t/p/w500/qA5kPYZA7FkVvqcEfJBSjwLqiYp.jpg', // Poster de "Interestelar" como exemplo
                    title: 'Interestelar',
                    year: '(2014)',
                    genres: ['Aventura', 'Drama', 'Ficção Científica'],
                    rating: '8.4/10',
                    overview: 'As aventuras de um grupo de exploradores que faz uso de um buraco de minhoca recém-descoberto para superar as limitações de uma viagem espacial humana e conquistar as vastas distâncias envolvidas em uma jornada interestelar.',
                    tmdbUrl: 'https://www.themoviedb.org/movie/157336-interstellar',
                    providers: [
                        { name: 'Netflix', logoUrl: 'https://image.tmdb.org/t/p/original/9A1JSVmSxsyaBK4SUFsYVqbAYZA.jpg', watchUrl: '#' },
                        { name: 'Amazon Prime Video', logoUrl: 'https://image.tmdb.org/t/p/original/dQeAar5H99 प्रदोष व्रत.jpg', watchUrl: '#' }, // Exemplo de logo tmdb
                        // Adicione mais provedores conforme necessário
                    ]
                };

                if (moviePoster) moviePoster.src = filmeExemplo.posterUrl;
                if (movieTitle) movieTitle.textContent = filmeExemplo.title;
                if (movieYear) movieYear.textContent = filmeExemplo.year;
                
                if (movieGenres) {
                    movieGenres.innerHTML = ''; // Limpa
                    filmeExemplo.genres.forEach(genre => {
                        const badge = document.createElement('span');
                        badge.className = 'badge bg-secondary me-1';
                        badge.textContent = genre;
                        movieGenres.appendChild(badge);
                    });
                }
                if (movieRating) movieRating.innerHTML = `<i class="fas fa-star text-warning me-1"></i>${filmeExemplo.rating}`;
                if (movieOverview) movieOverview.textContent = filmeExemplo.overview;
                if (tmdbLink) tmdbLink.href = filmeExemplo.tmdbUrl;

                if (providersContainer) {
                    providersContainer.innerHTML = ''; // Limpa
                    if (filmeExemplo.providers && filmeExemplo.providers.length > 0) {
                        filmeExemplo.providers.forEach(provider => {
                            const providerLink = document.createElement('a');
                            providerLink.href = provider.watchUrl;
                            providerLink.target = '_blank';
                            providerLink.className = 'provider-item m-1';
                            providerLink.title = provider.name;

                            const providerImg = document.createElement('img');
                            providerImg.src = provider.logoUrl;
                            providerImg.alt = provider.name;
                            // Estilos para a imagem do provedor já estão no CSS

                            providerLink.appendChild(providerImg);
                            providersContainer.appendChild(providerLink);
                        });
                    } else {
                        providersContainer.innerHTML = '<p class="text-muted">Informações de provedores não disponíveis.</p>';
                    }
                }
                 // Após popular tudo, você controlaria a visibilidade das seções #loading, #erro, #conteudo
                 // Exemplo:
                 // document.getElementById('loading').style.display = 'none';
                 // document.getElementById('conteudo').style.display = 'block'; // Ou 'flex' dependendo do seu CSS
            }

            // Você chamaria uma função como popularMatchExemplo() ou sua própria função
            // em match.js quando os dados do filme estiverem prontos.
            // Por exemplo, após uma chamada de API ou evento do Socket.IO.
            // popularMatchExemplo(); // Descomente para ver o exemplo ao carregar a página

            // Lembre-se que o controle de visibilidade de #loading, #erro, #conteudo
            // deve estar no seu match.js principal.
        });
    </script>
</body>
</html>